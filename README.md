# OpenClaw China

é¢å‘ä¸­å›½ IM å¹³å°çš„ OpenClaw æ‰©å±•æ’ä»¶é›†åˆ

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹~

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) Â· [æ¼”ç¤º](#æ¼”ç¤º) Â· [é…ç½®é€‰é¡¹](#é…ç½®é€‰é¡¹) Â· [å¼€å‘](#å¼€å‘)

| å¹³å° | çŠ¶æ€ |
|------|:----:|
| é’‰é’‰ | âœ… å¯ç”¨ |
| é£ä¹¦ | âœ… å¯ç”¨ |
| ä¼ä¸šå¾®ä¿¡ï¼ˆæ™ºèƒ½æœºå™¨äººï¼‰ | âœ… å¯ç”¨ |
| ä¼ä¸šå¾®ä¿¡ï¼ˆè‡ªå»ºåº”ç”¨-å¯æ¥å…¥æ™®é€šå¾®ä¿¡ï¼‰ | âœ… å¯ç”¨ |
| QQ æœºå™¨äºº | ğŸš§ å¼€å‘ä¸­ |


## åŠŸèƒ½æ”¯æŒ

æ›´å¤šåŠŸèƒ½æ”¯æŒåœ¨åŠªåŠ›å¼€å‘ä¸­~

**ã€å…¨ç½‘é¦–å‘ã€‘é’‰é’‰æ”¯æŒæ–‡ä»¶æ¥å—å’Œå‘é€**

| åŠŸèƒ½ | é’‰é’‰ | é£ä¹¦ | ä¼ä¸šå¾®ä¿¡æ™ºèƒ½æœºå™¨äºº | ä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨ï¼ˆå¯æ¥å…¥æ™®é€šå¾®ä¿¡ï¼‰ |
|------|:----:|:----:|:------------------:|:----------------:|
| æ–‡æœ¬æ¶ˆæ¯ | âœ… | âœ… | âœ… | âœ… |
| Markdown | âœ… | âœ… | âœ… | âœ… |
| æµå¼å“åº” | âœ… | ğŸš§ å¼€å‘ä¸­ | âœ… stream å›è°ƒ | âŒ |
| å›¾ç‰‡/æ–‡ä»¶ | âœ…  | âœ…å¯æ¥æ”¶ | âœ… å¯æ¥æ”¶ | âœ… ä¸»åŠ¨å‘é€ï¼ˆæ”¯æŒç½‘ç»œ URL å’Œæœ¬åœ°æ–‡ä»¶ï¼‰ |
| è¯­éŸ³æ¶ˆæ¯ | âœ…  | ğŸš§ å¼€å‘ä¸­ | âœ… ä»…æ¥æ”¶ï¼ˆè¯­éŸ³æ–‡æœ¬ï¼‰ | âœ… ä»…æ¥æ”¶ |
| ç§èŠ | âœ… | âœ… | âœ… | âœ… |
| ç¾¤èŠ | âœ… | âœ… | âœ… | âœ… |
| @æœºå™¨äººæ£€æµ‹ | âœ… | âœ… | âŒï¼ˆæœªæ˜¾å¼è§£æ@ï¼‰ | âŒ |
| å¤šè´¦æˆ· | ğŸš§ å¼€å‘ä¸­ | ğŸš§ å¼€å‘ä¸­ | âœ… | âœ… |
| ä¸»åŠ¨å‘é€æ¶ˆæ¯ | âœ… | âœ… | âŒ | âœ…ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€Markdownï¼‰ |
| è¿æ¥æ–¹å¼ | Stream é•¿è¿æ¥ | WebSocket é•¿è¿æ¥ | HTTPS å›è°ƒ | HTTPS å›è°ƒ |
| Access Token ç¼“å­˜ | - | - | - | âœ…ï¼ˆ2 å°æ—¶æœ‰æ•ˆæœŸï¼‰ |

> ğŸ’¡ **é’‰é’‰ AI Card** æ”¯æŒæ‰“å­—æœºæ•ˆæœçš„æµå¼è¾“å‡ºï¼Œä½“éªŒæœ€ä½³ã€‚å¯ç”¨æ–¹å¼ï¼š`enableAICard: true`
>
> ğŸ’¡ **é£ä¹¦ Markdown å¡ç‰‡** å¯ç”¨æ–¹å¼ï¼š`sendMarkdownAsCard: true`
>
> ğŸ’¡ **ä¼ä¸šå¾®ä¿¡æ™ºèƒ½æœºå™¨äºº** ä»…æ”¯æŒè¢«åŠ¨å›å¤æ¨¡å¼ï¼Œä¸æ”¯æŒä¸»åŠ¨å‘é€æ¶ˆæ¯
>
> ğŸ’¡ **ä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨** æ”¯æŒä¸»åŠ¨å‘é€æ¶ˆæ¯ï¼Œéœ€è¦é…ç½® `corpId`ã€`corpSecret`ã€`agentId`

## 2.4 æ›´æ–°

1. é’‰é’‰ã€é£ä¹¦æ”¯æŒå®šæ—¶ä»»åŠ¡ï¼ˆä¸»åŠ¨å‘é€æ¶ˆæ¯ï¼‰ã€‚
2. ä¿®å¤é’‰é’‰è¯­éŸ³å‘é€é—®é¢˜ï¼Œå½“å‰å¯æ­£å¸¸å‘é€è¯­éŸ³ã€‚
3. ä¹‹å‰é»˜è®¤åªå‘é€æœ€ç»ˆå›å¤æ–‡æœ¬ï¼Œä½†éƒ¨åˆ†ä»»åŠ¡ç­‰å¾…è¾ƒé•¿ï¼›ç°å¼€æ”¾å‚æ•° `replyFinalOnly`ï¼ˆé»˜è®¤ `false`ï¼‰ä»¥æ§åˆ¶æ˜¯å¦ä»…å‘é€æœ€ç»ˆç»“æœã€‚

## å¿«é€Ÿå¼€å§‹

### 1) å®‰è£…

> é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡ä¿å§†æ–‡æ¡£ç¼–å†™ä¸­ï¼Œç°åœ¨æœ€å®¹æ˜“é…ç½®çš„æ˜¯é’‰é’‰ï¼Œå»ºè®®å…ˆå°è¯•é’‰é’‰ã€‚

#### æ–¹å¼ä¸€ï¼šä» npm å®‰è£…

**å®‰è£…ç»Ÿä¸€åŒ…ï¼ˆåŒ…å«æ‰€æœ‰æ¸ é“ï¼‰**

```bash
openclaw plugins install @openclaw-china/channels
```

**æˆ–è€…ï¼šå®‰è£…å•ä¸ªæ¸ é“ï¼ˆä¸è¦å’Œç»Ÿä¸€åŒ…åŒæ—¶å®‰è£…ï¼‰**

```bash
openclaw plugins install @openclaw-china/dingtalk
```

```bash
openclaw plugins install @openclaw-china/feishu
```

```bash
openclaw plugins install @openclaw-china/wecom
```

#### æ›´æ–°æ’ä»¶

```bash
openclaw plugins update channels
```


#### æ–¹å¼äºŒï¼šä»æºç å®‰è£…ï¼ˆå…¨å¹³å°é€šç”¨ï¼‰

> âš ï¸ **Windows ç”¨æˆ·æ³¨æ„**ï¼šç”±äº OpenClaw å­˜åœ¨ Windows å…¼å®¹æ€§é—®é¢˜ï¼ˆ`spawn npm ENOENT`ï¼‰ï¼Œnpm å®‰è£…æ–¹å¼æš‚ä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨æ–¹å¼äºŒã€‚

```bash
git clone https://github.com/BytePioneer-AI/moltbot-china.git
cd moltbot-china
pnpm install
pnpm build
openclaw plugins install -l ./packages/channels
```

#### æ›´æ–°æºç 

```bash
git pull origin main
pnpm install
pnpm build
```

> é“¾æ¥æ¨¡å¼ä¸‹æ„å»ºåå³ç”Ÿæ•ˆï¼Œé‡å¯ Gateway å³å¯ã€‚

> â„¹ï¸ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ—§åç§° **clawbot**ï¼Œè¯·ä½¿ç”¨ `@openclaw-china/channels@0.1.12`ã€‚

### 2) é…ç½®æ¸ é“

#### é’‰é’‰

> ğŸ“– **[é’‰é’‰ä¼ä¸šæ³¨å†ŒæŒ‡å—](doc/guides/dingtalk/configuration.md)** â€” æ— éœ€ææ–™ï¼Œ5 åˆ†é’Ÿå†…å®Œæˆé…ç½®

```bash
openclaw config set channels.dingtalk.enabled true
openclaw config set channels.dingtalk.clientId dingxxxxxx
openclaw config set channels.dingtalk.clientSecret your-app-secret
openclaw config set channels.dingtalk.enableAICard false
openclaw config set gateway.http.endpoints.chatCompletions.enabled true
```

**å¯é€‰é«˜çº§é…ç½®**

å¦‚æœä½ éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶ï¼ˆä¾‹å¦‚ç§èŠ/ç¾¤èŠç­–ç•¥æˆ–ç™½åå•ï¼‰ï¼Œå¯ä»¥åœ¨ `~/.openclaw/openclaw.json` ä¸­æŒ‰éœ€æ·»åŠ ï¼š

```json5
{
  "channels": {
    "dingtalk": {
      "dmPolicy": "open",          // open | allowlist
      "groupPolicy": "open",       // open | allowlist | disabled
      "requireMention": true,
      "allowFrom": [],
      "groupAllowFrom": []
    }
  }
}
```


#### ä¼ä¸šå¾®ä¿¡ï¼ˆè‡ªå»ºåº”ç”¨-å¯æ¥å…¥å¾®ä¿¡ï¼‰

ç”±[@RainbowRain9 Cai Hongyu](https://github.com/RainbowRain9)æä¾›

> ğŸ“– **[ä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨é…ç½®æŒ‡å—](doc/guides/wecom-app/configuration.md)** â€” æ”¯æŒä¸»åŠ¨å‘é€æ¶ˆæ¯

ä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨æ”¯æŒä¸»åŠ¨å‘é€æ¶ˆæ¯ï¼Œéœ€è¦é¢å¤–é…ç½® `corpId`ã€`corpSecret`ã€`agentId`ï¼š

```bash
openclaw config set channels.wecom-app.enabled true
openclaw config set channels.wecom-app.webhookPath /wecom-app
openclaw config set channels.wecom-app.token your-token
openclaw config set channels.wecom-app.encodingAESKey your-43-char-encoding-aes-key
openclaw config set channels.wecom-app.corpId your-corp-id
openclaw config set channels.wecom-app.corpSecret your-app-secret
openclaw config set channels.wecom-app.agentId 1000002
```

**ä¸æ™ºèƒ½æœºå™¨äººçš„åŒºåˆ«**

| åŠŸèƒ½ | æ™ºèƒ½æœºå™¨äºº (wecom) | è‡ªå»ºåº”ç”¨ (wecom-app) |
|------|:------------------:|:--------------------:|
| è¢«åŠ¨å›å¤ | âœ… | âœ… |
| ä¸»åŠ¨å‘é€æ¶ˆæ¯ | âŒ | âœ… |
| éœ€è¦ corpSecret | âŒ | âœ… |
| éœ€è¦ IP ç™½åå• | âŒ | âœ… |
| é…ç½®å¤æ‚åº¦ | ç®€å• | ä¸­ç­‰ |

**wecom-app å·²å®ç°åŠŸèƒ½æ¸…å•ï¼ˆæ‘˜è¦ï¼‰**

- å…¥ç«™ï¼šæ”¯æŒ JSON/XML å›è°ƒã€éªŒç­¾ä¸è§£å¯†ã€é•¿æ–‡æœ¬åˆ†ç‰‡ï¼ˆ2048 bytesï¼‰ã€stream å ä½/åˆ·æ–°ï¼ˆ5s è§„åˆ™ä¸‹ç¼“å†²ï¼‰ã€‚
- å…¥ç«™åª’ä½“ï¼šimage/voice/file/mixed è‡ªåŠ¨è½ç›˜ï¼Œæ¶ˆæ¯ä½“å†™å…¥ `saved:` ç¨³å®šè·¯å¾„ï¼›æŒ‰ `keepDays` å»¶è¿Ÿæ¸…ç†ã€‚
  - è®¾è®¡åŠ¨æœºï¼šé¿å…ä½¿ç”¨ `/tmp` é€ æˆâ€œæ”¶åˆ°åå¾ˆå¿«è¢«æ¸…ç†â€ï¼Œç¡®ä¿ OCR/MCP/å›å‘ç­‰äºŒæ¬¡å¤„ç†æœ‰ç¨³å®šè·¯å¾„å¯ä¾èµ–ã€‚
- å‡ºç«™ï¼šæ”¯æŒä¸»åŠ¨å‘é€æ–‡æœ¬ä¸åª’ä½“ï¼›æ”¯æŒ markdownâ†’çº¯æ–‡æœ¬é™çº§ï¼ˆstripMarkdownï¼‰ã€‚
- è·¯ç”±ä¸ç›®æ ‡ï¼šæ”¯æŒå¤šç§ target è§£æï¼ˆ`wecom-app:user:..` / `user:..` / è£¸ id / `@accountId`ï¼‰ï¼Œå‡å°‘ Unknown targetã€‚
- ç­–ç•¥ä¸å¤šè´¦å·ï¼šæ”¯æŒ defaultAccount/accountsï¼›dmPolicy/groupPolicy/allowlist/requireMentionï¼›inboundMedia(å¼€å…³/dir/maxBytes/keepDays)ã€‚

> æ›´å®Œæ•´è¯´æ˜è§ï¼š`doc/guides/wecom-app/configuration.md`


#### ä¼ä¸šå¾®ä¿¡ï¼ˆæ™ºèƒ½æœºå™¨äººï¼‰

> ä¼ä¸šå¾®ä¿¡æ™ºèƒ½æœºå™¨äººï¼ˆAPI æ¨¡å¼ï¼‰é€šè¿‡å…¬ç½‘ HTTPS å›è°ƒæ¥æ”¶æ¶ˆæ¯ï¼Œä»…æ”¯æŒè¢«åŠ¨å›å¤

```bash
openclaw config set channels.wecom.enabled true
openclaw config set channels.wecom.webhookPath /wecom
openclaw config set channels.wecom.token your-token
openclaw config set channels.wecom.encodingAESKey your-43-char-encoding-aes-key
```

**æ³¨æ„äº‹é¡¹**

- `webhookPath` å¿…é¡»ä¸ºå…¬ç½‘ HTTPS å¯è®¿é—®è·¯å¾„ï¼ˆå¦‚ `https://your.domain/wecom`ï¼‰
- `encodingAESKey` å¿…é¡»ä¸º 43 ä½å­—ç¬¦
- å¦‚é‡å›è°ƒæ ¡éªŒå¤±è´¥ï¼Œå…ˆç¡®è®¤ Token/EncodingAESKey ä¸åå°ä¸€è‡´



#### é£ä¹¦

> é£ä¹¦åº”ç”¨éœ€å¼€å¯æœºå™¨äººèƒ½åŠ›ï¼Œå¹¶ä½¿ç”¨ã€Œé•¿è¿æ¥æ¥æ”¶æ¶ˆæ¯ã€æ¨¡å¼

openclaw:

```bash
openclaw config set channels.feishu.enabled true
openclaw config set channels.feishu.appId cli_xxxxxx
openclaw config set channels.feishu.appSecret your-app-secret
openclaw config set channels.feishu.sendMarkdownAsCard true
```


### 3) è°ƒè¯•æ¨¡å¼å¯åŠ¨

```bash
openclaw gateway --port 18789 --verbose
```

### 4) ï¼ˆå¯é€‰ï¼‰å®‰è£…æœ¬ä»“åº“è‡ªå¸¦ Skills

æœ¬ä»“åº“åœ¨ `skills/` ç›®å½•ä¸‹æä¾›äº†ä¸€äº›å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨çš„æœ¬åœ°æŠ€èƒ½åŒ…ï¼ˆAgentSkillsï¼‰ã€‚

**å®‰è£…æ–¹å¼ï¼ˆæ¨èï¼šWorkspace çº§ï¼‰**

æŠŠ `skills/<skill-name>` å¤åˆ¶åˆ°ä½ çš„ OpenClaw å·¥ä½œåŒºï¼š

```bash
# åœ¨ä½ çš„é¡¹ç›®ç›®å½•ï¼ˆworkspaceï¼‰ä¸‹
mkdir -p ./skills
cp -a /path/to/openclaw-china/skills/wecom-app-ops ./skills/
```

**æˆ–å®‰è£…æ–¹å¼ï¼ˆå…¨å±€ï¼‰**

```bash
mkdir -p ~/.openclaw/skills
cp -a /path/to/openclaw-china/skills/wecom-app-ops ~/.openclaw/skills/
```

> è¯´æ˜ï¼šWorkspace > å…¨å±€ï¼ˆ`~/.openclaw/skills`ï¼‰> å†…ç½® skillsã€‚å¤åˆ¶åæ— éœ€é‡å¯ç½‘å…³ã€‚

å½“å‰å†…ç½®ç¤ºä¾‹ï¼š
- `wecom-app-ops`ï¼šä¼ä¸šå¾®ä¿¡è‡ªå»ºåº”ç”¨ï¼ˆwecom-appï¼‰æ—¥å¸¸æ“ä½œæŒ‡å—ï¼ˆtarget/replyTo/å›å‘å›¾ç‰‡/å½•éŸ³/æ–‡ä»¶ã€OCR/MCPã€æ’éšœã€åª’ä½“ä¿ç•™ç­–ç•¥ï¼‰

## æ¼”ç¤º

ä»¥ä¸‹ä¸ºé’‰é’‰æ¸ é“æ•ˆæœç¤ºä¾‹ï¼š

![é’‰é’‰æœºå™¨äººæ¼”ç¤º](doc/images/dingtalk-demo_2.gif)

![é’‰é’‰æœºå™¨äººæ¼”ç¤º](doc/images/dingtalk-demo_3.png)

## é…ç½®é€‰é¡¹

> é€šç”¨å­—æ®µé€‚ç”¨äºæ‰€æœ‰æ¸ é“ï¼›æ¸ é“ä¸“ç”¨å­—æ®µä»…åœ¨å¯¹åº”æ¸ é“ç”Ÿæ•ˆã€‚

### é€šç”¨å­—æ®µ

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `enabled` | æ˜¯å¦å¯ç”¨ |
| `dmPolicy` | ç§èŠç­–ç•¥ï¼š`open`ï¼ˆä»»ä½•äººï¼‰/ `allowlist`ï¼ˆç™½åå•ï¼‰ |
| `groupPolicy` | ç¾¤èŠç­–ç•¥ï¼š`open`ï¼ˆä»»ä½•ç¾¤ï¼‰/ `allowlist`ï¼ˆç™½åå•ï¼‰/ `disabled`ï¼ˆç¦ç”¨ï¼‰ |
| `requireMention` | ç¾¤èŠä¸­æ˜¯å¦éœ€è¦ @æœºå™¨äºº |
| `allowFrom` | ç§èŠç™½åå•ç”¨æˆ· ID |
| `groupAllowFrom` | ç¾¤èŠç™½åå•ç¾¤ ID |
| `maxFileSizeMB` | åª’ä½“æ–‡ä»¶å¤§å°é™åˆ¶ (MB)ï¼Œé»˜è®¤ 100 |
| `replyFinalOnly` | ä»…å‘é€æœ€ç»ˆå›å¤ï¼ˆéæµå¼ï¼‰ï¼Œé»˜è®¤ `false` |


### ä¼šè¯é…ç½®ï¼ˆå¯é€‰ï¼‰

`session.dmScope` æ§åˆ¶ä¸åŒç”¨æˆ·çš„ä¼šè¯éš”ç¦»æ–¹å¼ï¼š

| å€¼ | è¯´æ˜ |
|----|------|
| `main` | æ‰€æœ‰ç”¨æˆ·å…±äº«åŒä¸€ä¼šè¯ï¼ˆä¸æ¨èï¼‰ |
| `per-peer` | **æ¨è**ï¼ŒæŒ‰ç”¨æˆ· ID éš”ç¦» |
| `per-channel-peer` | æŒ‰æ¸ é“ + ç”¨æˆ·éš”ç¦» |

## å¼€å‘

é€‚åˆéœ€è¦äºŒæ¬¡å¼€å‘æˆ–è°ƒè¯•çš„åœºæ™¯ï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/BytePioneer-AI/moltbot-china.git
cd moltbot-china

# å®‰è£…ä¾èµ–å¹¶æ„å»º
pnpm install
pnpm build

# ä»¥é“¾æ¥æ¨¡å¼å®‰è£…ï¼ˆä¿®æ”¹ä»£ç åå®æ—¶ç”Ÿæ•ˆï¼‰
openclaw plugins install -l ./packages/channels
```

**ç¤ºä¾‹é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰**

```json
{
  "plugins": {
    "load": {
      "paths": ["/path/to/OpenClaw-china/packages/channels"]
    },
    "entries": {
      "channels": { "enabled": true }
    }
  },
  "channels": {
    "dingtalk": {
      "enabled": true,
      "clientId": "dingxxxxxx",
      "clientSecret": "your-app-secret"
    },
    "feishu": {
      "enabled": true,
      "appId": "cli_xxxxxx",
      "appSecret": "your-app-secret"
    },
    "wecom": {
      "enabled": true,
      "webhookPath": "/wecom",
      "token": "your-token",
      "encodingAESKey": "your-43-char-encoding-aes-key"
    },
    "wecom-app": {
      "enabled": true,
      "webhookPath": "/wecom-app",
      "token": "your-token",
      "encodingAESKey": "your-43-char-encoding-aes-key",
      "corpId": "your-corp-id",
      "corpSecret": "your-app-secret",
      "agentId": 1000002
    }
  }
}
```

å¯¹OpenClawç”¨æ³•ã€æ’ä»¶æ„Ÿå…´è¶£çš„å¯ä»¥åŠ ç¾¤äº¤æµã€‚

- å®‰è£…é—®é¢˜å¯ä»¥åŠ ç¾¤è¯¢é—®
- æPRæ—¶é‡åˆ°å¼€å‘é—®é¢˜åŠ ç¾¤è¯¢é—®
- é¡¹ç›®æ¶æ„ç»†èŠ‚åŠ ç¾¤è¯¢é—®
- æ’ä»¶**BUG**å»ºè®®æäº¤**issue**

**æ¬¢è¿åŒå­¦ä»¬ä¸€èµ·å¼€å‘~**


![cbd7b54fbf7ed4d33fc42b27f3d2d3b6](https://github.com/user-attachments/assets/ec987754-041a-46f4-829e-215bcf6a10a8)




## License

MIT
